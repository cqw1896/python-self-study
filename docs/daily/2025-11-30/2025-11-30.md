### 2025-12-1（星期一）
**本周目标**：掌握变量、运算符、基本 I/O、条件和循环；完成 **猜数字**、**简易计算器** 两个小项目
**今日完成**：

- [ ] **学习要点**：

  - 变量、数据类型（`int`、`float`、`str`、`bool`）  
  - 运算符（算术、比较、逻辑）  
  - `input()` 与 `print()` 交互 
  - 单元测试

  ```bash
  # 1️⃣ 变量练习脚本 variables.py
  def main():
      # 读取用户输入
      name = input("请输入您的姓名: ")
      age_input = input("请输入您的年龄: ")
      try:
          age = int(age_input)      # 转换为整数
      except ValueError:
          print("年龄必须是数字!")
          return
  
      # 输出问候语
      print(f"Hello, {name}, you are {age} years old.")
  
  if __name__ == "__main__":
      main()
  
  # 2️⃣ 测试代码 test_variables.py
  import pytest
  from unittest.mock import patch
  from io import StringIO
  import sys
  from variables import main
  
  
  def test_valid_input(capsys):
      """测试正常输入：姓名和有效年龄"""
      # 模拟 input 的返回值
      with patch("builtins.input", side_effect=["张三", "25"]):
          main()
      # 捕获 print 输出
      captured = capsys.readouterr()
      assert "Hello, 张三, you are 25 years old."
  
  
  def test_invalid_age(capsys):
      """测试年龄输入非数字的情况"""
      with patch("builtins.input", side_effect=["李四", "abc"]):
          main()
      captured = capsys.readouterr()
      assert "年龄必须是数字!" in captured.out
  
  
  def test_negative_age(capsys):
      """测试负数年龄（合法整数，程序应接受）"""
      with patch("builtins.input", side_effect=["王五", "-5"]):
          main()
      captured = capsys.readouterr()
      assert "Hello, 王五, you are -5 years old." in captured.out
      
  # 3️⃣ 测试
  pytest tests/test_variables.py
  ```

  把核心逻辑从 main() 中抽离出来，便于单元测试（不依赖 input/print）

  ```bash
  # 把核心逻辑从 main() 中抽离出来，便于单元测试（不依赖 input/print）
  # 1️⃣ 变量练习脚本 variables_1.py
  def variables(name: str, age: int) -> str:
      return f"Hello, {name}, you are {age} years old."
  
  
  def main():
      """入口函数，处理 I/O (副作用)"""
      name = input("请输入你的姓名: ")
      age_input = input("请输入你的年龄: ")
      try:
          age = int(age_input)
      except ValueError:
          print("年龄必须是数字!")
          return
      print(variables(name, age))
  
  
  if __name__ == "__main__":
      main()
      
  # 2️⃣ 测试代码 test_variables_1.py
  import pytest
  from unittest.mock import patch
  from variables_1 import variables, main
  
  
  # 1. 测试纯函数 variables_1
  def test_variables_default():
      assert variables("张三", 25) == "Hello, 张三, you are 25 years old."
  
  
  def test_variables_negative_age():
      assert variables("李四", -5) == "Hello, 李四, you are -5 years old."
  
  
  def test_variables_zero_age():
      assert variables("王五", 0) == "Hello, 王五, you are 0 years old."
  
  
  # 2. 测试 main() 需要模拟 I/O ,但逻辑已最小化
  def test_main_valid_input(capsys):
      with patch("builtins.input", side_effect=["王五", "30"]):
          main()
      captured = capsys.readouterr()
      assert "Hello, 王五, you are 30 years old." in captured.out
  
  
  def test_main_invalid_age(capsys):
      with patch("builtins.input", side_effect=["赵六", "not_a_number"]):
          main()
      captured = capsys.readouterr()
      assert "年龄必须是数字!" in captured.out
      
  
  # 3️⃣ 测试
  pytest tests/test_variables_1.py
  ```

  

- [ ] **实操步骤**：见上方命令与代码

- [ ] **成果检查**：所有检查项已满足

**遇到的困难**： 

**解决方案**：  



### 2025-12-2（星期二）

**本周目标**：掌握变量、运算符、基本 I/O、条件和循环；完成 **猜数字**、**简易计算器** 两个小项目
**今日完成**：

- [ ] **学习要点**：

  - 条件判断 `if / elif / else`  

  - 布尔表达式、三元运算符  

  ```python
  # check_age.py
  def is_adult(age: int) -> str:
  	return '成年人' if age>=18 else '未成年'
  
  def main():
  	while True:
  		age_input = input('请输入你的年龄(输入 q 退出): ')
  		if age_input.lower() == 'q':
  			print('已退出')
  			break
          try:
              age = int(age_input)
          except ValueError:
              print('请输入有效数字！')
              continue
          print(is_adult(age))
  
  if __name__ == '__main__':
      main()
      
      
  # pytest测试 tests/test_check_age.py
  import pytest
  from unittest.mock import patch
  from check_age import is_adult, main
  
  def test_is_adult_gt_et_18():
      assert is_adult(18) == '成年人'
      assert is_adult(29) == '成年人'
      assert is_adult(1000) == '成年人'
  def test_is_adult_lt_18():
      assert is_adult(12) == '未成年'
      assert is_adult(0) == '未成年'
      assert is_adult(-6) == '未成年'
  
  # 测试 main
  # main() 函数是一个 while True, 无限循环。处理完一个输入后，程序会继续等待下一个输入，导致测试卡住。
  # 所以应该在输入序列末尾添加 "q" 来退出循环
  def test_main_valid_input(capsys):
      with patch('builtins.input', side_effect=['25', 'q']):
          main()
      captured = capsys.readouterr()
      assert '成年人' in captured.out
      with patch('builtins.input', side_effect=['12', 'q']):
          main()
      captured = capsys.readouterr()
      assert '未成年' in captured.out
      
  def test_main_invalid_input(capsys):
      with patch('builtins.input', side_effect=['not a number', 'q']):
          main()
      captured = capsys.readouterr()
      assert '请输入有效数字！' in captured.out
      
  def test_main_exit(capsys):
      with patch('builtins.input', side_effect=['q', 'Q']):
          main()
      captured = capsys.readouterr()
      assert '已退出' in captured.out
      
  pytest tests/test_check_age.py -v
  ```

  

- [ ] **实操步骤**：见上方命令与代码
- [ ] **成果检查**：所有检查项已满足

**遇到的困难**： 

`main() `测试不通过 ，原因是：main() 函数是一个 while True, 无限循环。处理完一个输入后，程序会继续等待下一个输入，导致测试卡住。
**解决方案**： 

`side_effect`序列末尾加 ` 'q'`



### 2025-12-3（星期三）

**本周目标**：掌握变量、运算符、基本 I/O、条件和循环；完成 **猜数字**、**简易计算器** 两个小项目
**今日完成**：

- [ ] **学习要点**：

  - 循环结构 `for`、`while`、`range()`  

  - 循环控制 `break`、`continue`、循环 `else`  

  - ```python
    # 猜数字
    import random
    
    
    def guess_num(random_num):
        count = 0
        while True:
            guess_num_input = input("你猜的数字是: ")
            try:
                guess_num = int(guess_num_input)
            except ValueError:
                print("输入的不是数字")
                continue
            if random_num != guess_num and guess_num < random_num:
                print("你猜小了")
                count += 1
                continue
            elif random_num != guess_num and guess_num > random_num:
                print("大了")
                count += 1
                continue
            print(f"猜对了: {guess_num}")
            count += 1
            print(f"总共猜了 {count} 次")
            s = input("是否继续猜游戏？继续(y),退出(q): ")
            if s.lower() == "y":
                random_num = random.randint(1, 100)
                count = 0
                continue
            break
    
    
    def main():
        random_num = random.randint(1, 100)
        guess_num(random_num)
    
    
    if __name__ == "__main__":
        main()

- [ ] 

  - ```python
    # while-else
    # while-else 语句中的 else 块会在 while 循环正常完成后执行，如果循环被 break 语句提前终止，则不会执行 else 块，跟 continue 无关
    # while_else.py
    count = 0
    while count < 5:
        count += 1
        if count == 3:
            continue
        print(f'count: {count}')
    else:
    	print('循环结束')
    
    python while_else.py
    count: 1
    count: 2
    count: 4
    count: 5
    循环结束
    
    count = 0
    while count < 5:
        count += 1
        if count == 3:
        	break
        print(f'count: {count}')
    else:
    	print('循环结束')
        
    python while_else.py
    count: 1
    count: 2
    ```

  - 

  - ```python
    # 简易计算器
    #!/usr/bin/env python3
    # -*- coding:utf-8 -*-
    def calcuator():
        """主计算器函数"""
        print("=" * 40)
        print("欢迎使用简易计算器")
        print("=" * 40)
    
        while True:
            # 显示菜单
            print("\n请选择运算类型: ")
            print("1. 加法（+）")
            print("2. 减法（-）")
            print("3. 乘法（*）")
            print("4. 除法（/）")
            print("5. 幂运算（**）")
            print("6. 取余（%）")
            print("7. 整除（//）")
            print("8. 开方（√）")
            print("9. 退出")
            print("-" * 40)
    
            # 获取用户选择
            choice = input("请输入选项: (1-9): ")
    
            # 退出条件
            if choice == "9":
                print("\n感谢使用计算器，再见！")
                break
    
            # 检查输入是否有效
            if choice not in ["1", "2", "3", "4", "5", "6", "7", "8", "9"]:
                print("\n错误：无效选项，请重新选择！")
                continue
    
            # 获取数字（开方只需要一个数字）
            try:
                num1 = float(input("\n请输入第一个数字："))
                # 开方运算只需要一个数字
                if choice == "8":
                    num2 = None
                else:
                    num2 = float(input("请输入第二个数字："))
            except ValueError:
                print("\n错误：请输入有效数字！")
                continue
            # 根据选择执行计算
            if choice == "1":
                result = num1 + num2
                operator = "+"
            elif choice == "2":
                result = num1 - num2
                operator = "-"
            elif choice == "3":
                result = num1 * num2
                poerator = "*"
            elif choice == "4":
                # 检查除数是否为0
                if num2 == 0:
                    print("\n错误：除数不能为零！")
                    continue
                result = num1 / num2
                operator = "/"
            elif choice == "5":
                result = num1**num2
                operator = "**"
            elif choice == "6":
                if num2 == 0:
                    print("\n错误：除数不能为零！")
                    continue
                result = num1 % num2
                operator = "%"
            elif choice == "7":
                if num2 == 0:
                    print("\n错误：除数不能为零！")
                    continue
                result = num1 // num2
                operator = "//"
            elif choice == "8":
                # 检查是否为负数
                if num1 < 0:
                    print("\n错误：不能对负数开方！")
                    continue
                result = num1**0.5
                operator = "√"
            # 显示结果
            if choice == "8":
                print(f"\n结果：√{num1} = {result}")
            else:
                print(f"\n结果：{num1} {operator} {num2} = {result}")
            print("=" * 40)
    
    
    if __name__ == "__main__":
        calcuator()
    ```

- [ ] **实操步骤**：见上方命令与代码

- [ ] **成果检查**：所有检查项已满足

### 2025-12-4（星期四）

**本周目标**：掌握变量、运算符、基本 I/O、条件和循环；完成 **猜数字**、**简易计算器** 两个小项目

**今日完成**：

- [ ] **学习要点**  

- 函数定义、参数（位置、默认、`*args`, `**kwargs`）  

  - 参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和可变关键字参数
  - 可变参数可以接收任意数量的位置参数，会收集所有额外的位置参数到一个元组中
  - 命名关键字参数前如果没有可变参数，其前必须有个分隔符 * ，表示命名关键字参数必须使用关键字形式传入
  - 可变关键字参数可以接收任意数量的关键字参数，会收集所有额外的关键字参数到一个字典中

  ```python
  def f1(a, b, x=3, *args, city, **kwagrs):
      pass
  
  def f2(a, b, x=3, *, city, **kwagrs):
      pass
  ```

  

- 返回值、作用域（局部/全局）  

- [ ] **实操步骤**：见上方命令与代码
- [ ] **成果检查**：所有检查项已满足

### 2025-12-5（星期五）

**本周目标**：掌握变量、运算符、基本 I/O、条件和循环；完成 **猜数字**、**简易计算器** 两个小项目

**今日完成**：

- [ ] **学习要点**  

- 猜数字游戏（随机数生成、异常捕获、循环交互）

```python
# 猜数字游戏 guess_number.py
import random

def guess_number_game():
    secret = random.randint(1, 100)
    attempts = 0
    print('我已经想好了一个 1-100 之间的数字，快来猜吧！')
    
    while True:
        user_input = input('请输入你的猜测（或输入 q 退出）').strip()
        attempts += 1
        if user_input.lower() == 'q':
            print('已退出，游戏结束。')
            break
        
        try:
            guess = int(user_input)
        except ValueError:
            print('输入无效，请输入整数或 q。')
            attempts -= 1  # 本次不算有效尝试
            continue
            
        if guess < secret:
            print('太小了，再试试！')
        elif guess > secret:
            print('太大了，再试试！')
        else:
            print(f'恭喜！你用了 {attempts} 次猜中数字 {secret}！')
            break
            
if __name__ == '__main__':
    guess_number_game()

    
import pytest
from unittest.mock import patch, MagicMock
import random
from guess_number import guess_number_game

@pytest.fixture
def mock_random():
    with patch('random.randint') as mock_rand:
        mock_rand.return_value = 42  # 固定随机数以便测试
        yield mock_rand

def test_guess_correct_number(mock_random, capsys):
    # 模拟用户输入正确数字
    with patch('builtins.input', return_value='42'):
        guess_number_game()
    captured = capsys.readouterr()
    assert '恭喜！你用了 1 次猜中数字 42！' in captured.out

def test_guess_lower_number(mock_random, capsys):
    # 模拟用户先输入较小数字，再输入正确数字
    with patch('builtins.input', side_effect=['30', '42']):
        guess_number_game()
    captured = capsys.readouterr()
    assert '太小了，再试试！' in captured.out
    assert '恭喜！你用了 2 次猜中数字 42！' in captured.out

def test_guess_higher_number(mock_random, capsys):
    # 模拟用户先输入较大数字，再输入正确数字
    with patch('builtins.input', side_effect=['50', '42']):
        guess_number_game()
    captured = capsys.readouterr()
    assert '太大了，再试试！' in captured.out
    assert '恭喜！你用了 2 次猜中数字 42！' in captured.out

def test_quit_game(mock_random, capsys):
    # 测试退出游戏功能
    with patch('builtins.input', return_value='q'):
        guess_number_game()
    captured = capsys.readouterr()
    assert '已退出，游戏结束。' in captured.out

def test_invalid_input(mock_random, capsys):
    # 测试无效输入处理
    with patch('builtins.input', side_effect=['abc', '42']):
        guess_number_game()
    captured = capsys.readouterr()
    assert '输入无效，请输入整数或 q。' in captured.out
    assert '恭喜！你用了 1 次猜中数字 42！' in captured.out

这个测试代码包含了以下测试用例：

测试直接猜中正确数字的情况
测试先猜小数字再猜对的情况
测试先猜大数字再猜对的情况
测试退出游戏功能
测试无效输入的处理
测试代码使用了以下技术：

使用 pytest.fixture 创建 mock_random fixture 来固定随机数
使用 patch 来模拟用户输入
使用 capsys 来捕获程序输出
测试了各种边界情况和异常情况
这些测试用例覆盖了游戏的主要功能，包括正常游戏流程、退出功能和错误处理。每个测试用例都是独立的，并且可以重复运行。
        
```



- [ ] **实操步骤**：见上方命令与代码
- [ ] **遇到的困难**：不懂测试
- [ ] **成果检查**：所有检查项已满足

### 2025-12-6（星期六）

**本周目标**：掌握变量、运算符、基本 I/O、条件和循环；完成 **猜数字**、**简易计算器** 两个小项目

**今日完成**：

- [ ] **学习要点**  

- **项目**：简易计算器（循环读取运算符与操作数，`try/except` 防止除零） 

- [ ] **实操步骤**：见上方命令与代码
- [ ] **遇到的困难**：不懂测试
- [ ] **成果检查**：所有检查项已满足

